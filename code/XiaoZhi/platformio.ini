[env:esp32-s3-n16r8]
; 保留你指定的稳定版本平台（6.5.0）
platform = espressif32@6.5.0
board = esp32-s3-devkitc-1
framework = arduino
; 保留你指定的上传和监视器端口（COM3，适用于Windows）
upload_port = COM3
monitor_port = COM3
monitor_speed = 115200

; 保留你原有的分区表配置（若后续需要保存音频文件，可替换为ffat.csv）
board_build.partitions = min_spiffs.csv
; 保留原有编译标志 + 新增ESP32-S3 PSRAM支持（适配N16R8的8MB PSRAM）
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -Wno-unused-variable
    ; 新增：启用PSRAM（处理大音频缓冲区时避免内存不足）
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; 新增：添加CH1116 OLED所需的Adafruit GFX库依赖
lib_deps =
    adafruit/Adafruit GFX Library@^1.11.5

; 新增：串口监视器过滤器（解码ESP32异常，便于调试）
monitor_filters = direct, esp32_exception_decoder